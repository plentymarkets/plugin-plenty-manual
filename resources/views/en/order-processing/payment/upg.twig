<aside class="col-12 col-md-3 push-md-9">
    <div class="sticky-wrapper">
        <div class="sticky-container" data-fn="sticky-container" data-fn-options="{ onLoadHashScrollToLink: true }">
            <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#10"><span>1.</span><span> Important notes</span></a></li>
<li><a href="#20"><span>2.</span><span> Registering with UPG</span></a></li>
<li><a href="#30"><span>3.</span><span> Setting up UPG in plentymarkets</span></a></li>
<li><a href="#40"><span>4.</span><span> Activating the payment method</span></a></li>
<li><a href="#50"><span>5.</span><span> Carrying out settings in the UPG account</span></a></li>
<li><a href="#60"><span>6.</span><span> Displaying UPG in the online store</span></a>
<ul class="sectlevel2">
<li><a href="#61"><span>6.1.</span><span> Customising the order confirmation</span></a></li>
<li><a href="#63" "=""><span>6.2.</span><span> Editing CheckoutCustomerInvoiceAddress</span></a></li>
<li><a href="#64" "=""><span>6.3.</span><span> Editing CheckoutCustomerShippingAddress</span></a></li>
<li><a href="#65" "=""><span>6.4.</span><span> Setting up name validation for B2B customers</span></a></li>
</ul>
</li>
<li><a href="#70"><span>7.</span><span> Automatically sending shipping confirmations</span></a></li>
<li><a href="#80"><span>8.</span><span> Automatically sending refunds</span></a></li>
<li><a href="#100"><span>9.</span><span> Automatically sending cancellations</span></a></li>
<li><a href="#110"><span>10.</span><span> Reporting a refund for partial cancellation to UPG</span></a></li>
</ul>
</div>
        </div>
    </div>
</aside>

<main class="col-12 col-md-9 pull-md-3" id="main">
    <h1>UPG</h1><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://www.upgplc.com/" target="_blank" rel="noopener">UPG</a> is a fully integrated payment solution for e-commerce offered by Creditreform.</p>
</div>
</div>
</div><div class="sect1">
<h2 id="10">1. Important notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides you with important information about integrating the payment provider in plentymarkets.</p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">UPG and store design</div>
<div class="paragraph">
<p>Note that the following conditions must be met before integrating UPG successfully in plentymarkets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use of the standard design Callisto (Version 2 or higher)</p>
</li>
<li>
<p>Use of the individual order process</p>
</li>
<li>
<p>Safe handling of the plentymarkets CMS</p>
</li>
<li>
<p>Experience with integrating payment providers</p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph subhead">
<p>Payment process</p>
</div>
<div class="paragraph">
<p>Depending on which payment method is selected, customers will either have to enter their details into an iframe or they will be redirected to a UPG page after confirming their order. If customers are redirected, they will need to enter their details for the selected payment method there. Once customers have entered the data and confirmed the payment, they will be directed back to your online store. Customers are currently redirected if they select the payment methods Sofortbanking or PayPal (as of 1st June 2016).</p>
</div>
</div>
</div><div class="sect1">
<h2 id="20">2. Registering with UPG</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Register with UPG before you carry out the relevant settings in plentymarkets. To do so, <a href="http://www.upgplc.com/services/online-payments/" target="_blank" rel="noopener">contact</a> UPG.</p>
</div>
</div>
</div><div class="sect1">
<h2 id="30">3. Setting up UPG in plentymarkets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proceed as described below to set  up the interface to UPG.</p>
</div>
<div class="paragraph instruction">
<p>Setting up the interface to UPG:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>System » Orders » Payment » Methods</strong>.</p>
</li>
<li>
<p>Place a check mark next to the setting <strong>Also show inactive</strong>.</p>
</li>
<li>
<p>Open the folder <strong>DE</strong>.</p>
</li>
<li>
<p>Click on <strong>UPG</strong>.<br>
→ The <strong>Settings</strong> tab will open.</p>
</li>
<li>
<p>Click on the <strong>Interface</strong> tab.</p>
</li>
<li>
<p>Expand the client.</p>
</li>
<li>
<p>Carry out the settings as desired. Pay attention to the information given in table 1.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. setting up the interface to UPG</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Test mode</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Activate the test mode to test the exchange of data between plentymarkets and UPG without the need for actual transactions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Seller ID</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Enter the seller ID that you received from UPG.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Private key</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Enter the private key that you received from UPG.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Shop ID</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Enter the store ID that you received from UPG.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div><div class="sect1">
<h2 id="40">4. Activating the payment method</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Set up and activate the UPG <a href="/en/order-processing/payment/managing-payment-methods#20">payment method</a> in the <strong>Settings</strong> tab of the payment method. In addition, check the settings for <strong>Permitted payment methods</strong> in the <a href="/en/order-processing/payment/managing-payment-methods#30">customer classes</a> and for <strong>Blocked payment methods</strong> in the <a href="/en/order-processing/fulfilment/preparing-the-shipment#1000">shipping profiles</a>. You need to select the payment methods that you want to offer in your UPG account.</p>
</div>
</div>
</div><div class="sect1">
<h2 id="50">5. Carrying out settings in the UPG account</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enter the integration URLs and select the payment methods that you want to offer with UPG. Do this in your UPG account. Other factors such as fraud rules also influence whether a payment method is offered to specific customers. Your UPG account includes an area for the integration. There, select the payment methods that you would like to offer and enter two URLs. The URLs must be structured as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Redirect URL: <a href="https://MY-PLENTYSTORE.co.uk/plenty/api/payment_notification.php?payment=crefopayredirectk" class="bare">https://MY-PLENTYSTORE.co.uk/plenty/api/payment_notification.php?payment=crefopayredirectk</a></p>
</li>
<li>
<p>Notification URL: <a href="https://MY-PLENTYSTORE.co.uk/plenty/api/payment_notification.php?payment=crefopay" class="bare">https://MY-PLENTYSTORE.co.uk/plenty/api/payment_notification.php?payment=crefopay</a></p>
</li>
</ul>
</div>
</div>
</div><div class="sect1">
<h2 id="60">6. Displaying UPG in the online store</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section explains how to display UPG in the online store of plentymarkets. This is done in several steps. To do so, edit the <strong>Order confirmation</strong> category first.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">No changes to the active design</div>
<div class="paragraph">
<p>Do not make changes to your active design. Before making changes to the design, make a backup copy so that you can restore the original state of the design.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="61">6.1. Customising the order confirmation</h3>
<div class="paragraph">
<p>Modify the category <strong>Order confirmation</strong> to make the payment methods offered through UPG available to customers of your online store.</p>
</div>
<div class="paragraph instruction">
<p>Adding the payment method selection to the order confirmation stage:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Item » Categories</strong>.</p>
</li>
<li>
<p>Open the design’s folder, e.g. the folder for Callisto Light 3.</p>
</li>
<li>
<p>Open the category <strong>Order confirmation</strong>.</p>
</li>
<li>
<p>Click on the <strong>Description 1</strong> tab.</p>
</li>
<li>
<p>Search for the <strong>div class="panel-body"</strong> container.</p>
</li>
<li>
<p>Replace the content of this div container with the example code below.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plenty hljs" data-lang="plenty">&lt;div class="row margin-bottom-15"&gt;
	&#123;&#37; if $CheckoutMethodOfPaymentID == 5500 &#37;&#125;
			&#123;&#37; $_crefoFrame = Container_CheckoutCrefoPay() &#37;&#125;
		&#123;&#37; endif &#37;&#125;
		&#123;&#37; if strlen($_crefoFrame) &#37;&#125;
			&#123;&#37; if $_crefoFrame == "PENDING" || $_crefoFrame == "ACCEPTED" &#37;&#125;
			&lt;div class="col-lg-6 col-md-6 col-sm-12"&gt;
				&lt;h4&gt;Thank you for your order!&lt;/h4&gt;

				&lt;hr&gt;

				&lt;p&gt;
					Your order was transmitted successfully. You will receive an order confirmation by e-mail.
					You can also check the order overview to find details regarding your orders.
				&lt;/p&gt;
				&lt;p&gt;
					&#123;&#37; if $_crefoFrame == "PENDING"&#37;&#125;
					Your payment is being processed. Payment status =&gt; $_crefoFrame
					&#123;&#37; else &#37;&#125;
					Your payment has been processed. Payment status =&gt; $_crefoFrame
					&#123;&#37; endif &#37;&#125;
				&lt;/p&gt;

				&lt;div class="row"&gt;
					&lt;div class="col-lg-6 col-md-6 col-sm-6"&gt;
						&lt;a class="btn btn-default btn-block" href="&#123;&#37; Link_Home() &#37;&#125;"&gt;
							&lt;span class="glyphicon glyphicon-home" aria-hidden="true"&gt;&lt;/span&gt; Back to homepage
						&lt;/a&gt;
					&lt;/div&gt;

					&lt;div class="col-lg-6 col-md-6 col-sm-6 margin-top-xs-1"&gt;
						&lt;a class="btn btn-primary btn-block" href="&#123;&#37; Link_Home() &#37;&#125;?AccountShow=OrderOverView&amp;OrderID=$_confirm-&gt;OrderID"&gt;
							&lt;span class="glyphicon glyphicon-eye-open" aria-hidden="true"&gt;&lt;/span&gt; Go to order overview
						&lt;/a&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&#123;&#37; else &#37;&#125;
				$_crefoFrame
			&#123;&#37; endif &#37;&#125;
		&#123;&#37; else &#37;&#125;

	&lt;div class="col-lg-6 col-md-6 col-sm-12"&gt;
		&lt;h4&gt;Thank you for your order!&lt;/h4&gt;

		&lt;hr&gt;

		&lt;p&gt;
			Your order was transmitted successfully. You will receive an order confirmation by e-mail.
			You can also check the order overview to find details regarding your orders.
		&lt;/p&gt;

		&lt;div class="row"&gt;
			&lt;div class="col-lg-6 col-md-6 col-sm-6"&gt;
				&lt;a class="btn btn-default btn-block" href="&#123;&#37; Link_Home() &#37;&#125;"&gt;
					&lt;span class="glyphicon glyphicon-home" aria-hidden="true"&gt;&lt;/span&gt; Back to homepage
				&lt;/a&gt;
			&lt;/div&gt;

			&lt;div class="col-lg-6 col-md-6 col-sm-6 margin-top-xs-1"&gt;
				&lt;a class="btn btn-primary btn-block" href="&#123;&#37; Link_Home() &#37;&#125;?AccountShow=OrderOverView&amp;OrderID=$_confirm-&gt;OrderID"&gt;
					&lt;span class="glyphicon glyphicon-eye-open" aria-hidden="true"&gt;&lt;/span&gt; Go to order overview
				&lt;/a&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&#123;&#37; endif &#37;&#125;
&lt;/div&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="63" "="">6.2. Editing CheckoutCustomerInvoiceAddress</h3>
<div class="paragraph">
<p>A small change in the <strong>CheckoutCustomerInvoiceAddress</strong> template is necessary, to display only those address values that are valid for CrefoPay.</p>
</div>
<div class="paragraph instruction">
<p>Editing CheckoutCustomerInvoiceAddress:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>CMS » Web design</strong>.</p>
</li>
<li>
<p>Open the folder <strong>Layout » Checkout</strong>.</p>
</li>
<li>
<p>Open the template <strong>CheckoutCustomerInvoiceAddress</strong>.</p>
</li>
<li>
<p>Search for the line of code <strong>&lt;option value="3"&#123;&#37; if $FormOfAddressID == 3 &#37;&#125; selected&#123;&#37; endif &#37;&#125;&gt;Familie&lt;/option&gt;</strong>.</p>
</li>
<li>
<p>Delete this line of code from the template.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="64" "="">6.3. Editing CheckoutCustomerShippingAddress</h3>
<div class="paragraph">
<p>Edit the template <strong>CheckoutCustomerShippingAddress</strong> in the same way.</p>
</div>
<div class="paragraph instruction">
<p>Editing CheckoutCustomerShippingAddress:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>CMS » Web design</strong>.</p>
</li>
<li>
<p>Open the folder <strong>Layout » Checkout</strong>.</p>
</li>
<li>
<p>Open the template <strong>CheckoutCustomerShippingAddress</strong>.</p>
</li>
<li>
<p>Search for the line of code <strong>&lt;option value="3"&#123;&#37; if $FormOfAddressID == 3 &#37;&#125; selected&#123;&#37; endif &#37;&#125;&gt;Familie&lt;/option&gt;</strong>.</p>
</li>
<li>
<p>Delete this line of code from the template.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="65" "="">6.4. Setting up name validation for B2B customers</h3>
<div class="paragraph">
<p>When using the payment provider UPG for B2B orders, the first name and last name of the customer must be shown on the invoice address. The template variables <strong>ValidateInvoiceAddressFirstNameIfCompany</strong> and <strong>ValidateInvoiceAddressLastNameIfCompany</strong> allow you to validate first and last names of B2B customers for invoice addresses if the company name was entered in the <strong>Company</strong> text field.</p>
</div>
<div class="paragraph instruction">
<p>Setting up name validation for B2B customers:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>CMS » Web design</strong>.</p>
</li>
<li>
<p>Open the folder <strong>Layout » PageDesign</strong>.</p>
</li>
<li>
<p>Click on <strong>PageDesignPrepareMainColumn</strong>.</p>
</li>
<li>
<p>Search for the template variables <strong>ValidateInvoiceAddressFirstNameIfCompany</strong> and <strong>ValidateInvoiceAddressLastNameIfCompany</strong>.</p>
</li>
<li>
<p>Change the values of both variables from <strong>false</strong> to <strong>true</strong>. Pay attention to the information given in table 2.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. template variables for B2B customers</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>ValidateInvoiceAddressFirstNameIfCompany</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>true</strong> = Check the <strong>First name</strong> text field if the company name was entered in the <strong>Company</strong> text field of the invoice address.<br>
<strong>false</strong> Do not check the <strong>First name</strong> text field.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>ValidateInvoiceAddressLastNameIfCompany</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>true</strong> = Check the <strong>Last name</strong> text field if the company name was entered in the <strong>Company</strong> text field of the invoice address.<br>
<strong>false</strong> Do not check the <strong>Last name</strong> text field.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div><div class="sect1">
<h2 id="70">7. Automatically sending shipping confirmations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need to confirm UPG that you have sent the items to your customer before you will receive the customers payment from UPG. Set up an <a href="/en/basics/automation/event-procedures">event procedure</a> to automatically send shipping confirmations when the outgoing items are booked.</p>
</div>
<div class="openblock collapseBox">
<div class="title">Setting up an event procedure</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>System » Orders » Events</strong>.</p>
</li>
<li>
<p>Click on <strong>Add event procedure</strong>.<br>
→ The <strong>Create new event procedure</strong> window will open.</p>
</li>
<li>
<p>Enter a name.</p>
</li>
<li>
<p>Select the <strong>event</strong> listed in table 3.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
<li>
<p>Pay attention to the explanations given in table 3 and carry out the settings as desired.</p>
</li>
<li>
<p>Place a check mark next to the option <strong>Active</strong>.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
</ol>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. event procedure for sending automatic shipping confirmations to UPG</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Selection</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Event</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order change: Outgoing items booked</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Filter 1</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order &gt; Order type</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order</strong><br>
Delivery order - optional for partial delivery</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Filter 2</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order &gt; Payment method</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>UPG</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Procedure</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Shipping &gt; Send shipping confirmation to UPG</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div><div class="sect1">
<h2 id="80">8. Automatically sending refunds</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a return and report this return to UPG if a customer has returned an item. The customer will only get a refund if you report the return. Set up an event procedure to automatically report returns to UPG.</p>
</div>
<div class="paragraph instruction">
<p>Creating a return:</p>
</div>
<div id="90" class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Orders » Edit orders</strong>.</p>
</li>
<li>
<p>Open the UPG order. <br>
→ The <strong>Overview</strong> tab will open.</p>
</li>
<li>
<p>Select the option <strong>create</strong> from the <strong>Return…​</strong> drop-down menu.</p>
</li>
<li>
<p>Select the items that were returned.<br>
→ The return will be created and opened.</p>
</li>
</ol>
</div>
<div class="openblock collapseBox">
<div class="title">Setting up an event procedure</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>System » Orders » Events</strong>.</p>
</li>
<li>
<p>Click on <strong>Add event procedure</strong>.<br>
→ The <strong>Create new event procedure</strong> window will open.</p>
</li>
<li>
<p>Enter a name.</p>
</li>
<li>
<p>Select the <strong>event</strong> listed in table 4.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
<li>
<p>Pay attention to the explanations given in table 4 and carry out the settings as desired.</p>
</li>
<li>
<p>Place a check mark next to the option <strong>Active</strong>.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
</ol>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. event procedure for automatically reporting refunds to UPG</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Selection</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Event</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order generation: New return</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Filter</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order &gt; Payment method</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>UPG</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Procedure</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Payment methods &gt; Send refund to UPG</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div><div class="sect1">
<h2 id="100">9. Automatically sending cancellations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Set up an <a href="/en/basics/automation/event-procedures">event procedure</a> to automatically inform UPG of cancellations.</p>
</div>
<div class="openblock collapseBox">
<div class="title">Setting up an event procedure</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>System » Orders » Events</strong>.</p>
</li>
<li>
<p>Click on <strong>Add event procedure</strong>.<br>
→ The <strong>Create new event procedure</strong> window will open.</p>
</li>
<li>
<p>Enter a name.</p>
</li>
<li>
<p>Select the <strong>event</strong> listed in table 5.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
<li>
<p>Pay attention to the explanations given in table 5 and carry out the settings as desired.</p>
</li>
<li>
<p>Place a check mark next to the option <strong>Active</strong>.</p>
</li>
<li>
<p><strong>Save</strong> the settings.</p>
</li>
</ol>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. event procedure for sending automatic cancellations to UPG</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Selection</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Event</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order change: Status change</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Select status for <strong>cancelled orders</strong>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Filter</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order &gt; Order type</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Filter</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Order &gt; Payment method</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>UPG</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Procedure</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Payment methods &gt; Send cancellation to UPG</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div><div class="sect1">
<h2 id="110">10. Reporting a refund for partial cancellation to UPG</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you cannot deliver an item that a customer has already paid for, you need to report this cancellation to UPG, so that the customer will get his or her money back. You can trigger this refund by completing the order. Once an order has been completed, the customer receives the amount of money that is left, when the delivered items are subtracted from the total the customer has paid.</p>
</div>
<div class="paragraph instruction">
<p>Sending a refund:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Orders » Edit orders</strong>.</p>
</li>
<li>
<p>Open the UPG order. <br>
→ The <strong>Overview</strong> tab will open.</p>
</li>
<li>
<p>Click on the <strong>Settings</strong> tab.</p>
</li>
<li>
<p>Click on <strong>Complete UPG payment process</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also complete an order to give the customer a refund if the customer has paid a higher amount than the invoice amount.</p>
</div>
</div>
</div>
</main>