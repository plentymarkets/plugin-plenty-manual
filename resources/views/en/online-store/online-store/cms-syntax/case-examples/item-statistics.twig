<aside class="plenty-anchor-navbar">
    <div class="sticky-wrapper">
        <div class="sticky-container" data-fn="sticky-container" data-fn-options="{ onLoadHashScrollToLink: true }">
            
        </div>
    </div>
</aside>

<main id="main">
    <h1>Item statistics</h1><div class="sect1">
<h2 id="_tracking_order_confirmation_items_using_google_analytics">Tracking order confirmation items using Google Analytics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend that you analyze your sales data to stay up to date with your customers' demands and position your products effectively. Analytics technologies such as Google Analytics collect anonymous user statistics regarding user behavior and provide you with invaluable information about the items in your store which sell well. <br>
In this case example, a list of the items ordered is loaded into the template of the order confirmation and information regarding the individual items is sent to Google Analytics.</p>
</div>
</div>
</div><div class="sect1">
<h2 id="_requirements">Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following requirements must be met for this case example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <a href="/en/omni-channel/online-store/setting-up-clients/extras/universal-analytics">Google Universal Analytics</a> account</p>
</li>
<li>
<p>Activation of <a href="https://support.google.com/analytics/answer/1009612?hl=en" target="_blank" rel="noopener">Ecommerce Tracking</a>&nbsp;<span class="icon "><i class="fa fa-external-link  "></i></span> in Google Analytics</p>
</li>
</ul>
</div>
</div>
</div><div class="sect1">
<h2 id="_sending_item_data_to_google_analytics">Sending item data to Google Analytics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Insert the <a href="https://support.google.com/analytics/answer/1008080" target="_blank" rel="noopener">tracking code snippet</a>&nbsp;<span class="icon "><i class="fa fa-external-link  "></i></span> generated by Google into a template, e.g. <strong>CMS » Web design » Layout » PageDesign » PageDesignCheckout</strong>. Once the tracking code snippet has been inserted, data can be sent to Google Analytics.</p>
</div>
<div class="sect2">
<h3 id="_registering_the_transaction">Registering the transaction</h3>
<div class="paragraph">
<p>To allow Google Analytics to associate item data with a transaction, the transaction must be registered with Google Analytics. For this purpose, the transaction ID and optional additional shopping cart data is sent to Google Analytics. <br>
The following table shows the transaction data that can be transmitted to Google Analytics.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. transaction data</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>affiliation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The store in which the transaction was completed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>revenue</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction revenue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>shipping</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction shipping costs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>tax</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction tax</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An example code to register transactions with Google Analytics is shown below.</p>
</div>
<div class="paragraph instruction">
<p>Inserting example code into the design:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the example code to adjust it to your requirements.</p>
</li>
<li>
<p>Go to <strong>CMS » Web design » Layout » PageDesign » PageDesignCheckout</strong>.</p>
</li>
<li>
<p>Select the <strong>PageDesignCheckoutMainFrame</strong> tab.</p>
</li>
<li>
<p>Insert the code example at an appropriate position of the template.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plenty" data-lang="plenty">{#
	Code example for registering a transaction with Google Analytics.
#}
&lt;script type="text/javascript"&gt;
	{# Registers the e-commerce functionality with Google Analytics. #}
	ga('require', 'ecommerce');

	{# Adds the transaction. #}
	ga('ecommerce:addTransaction',
	{
		'id': $OrderID,								{# Transaction ID #}
		'affiliation': 'your-plentystore.co.uk/',	{# Optional: your store name #}
		'revenue': $TotalAmountGrossDot,			{# Optional: revenue #}
		'shipping': $ShippingCostsNetDot,			{# Optional: shipping method #}
		'tax': 0.00,								{# Optional: tax #}
		'currency': 'GBP'							{# Optional: currency #}
	});
&lt;/script&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_retrieving_the_item_list_and_sending_item_data_to_google_analytics">Retrieving the item list and sending item data to Google Analytics</h3>
<div class="paragraph">
<p>If the transaction was registered with Google Analytics, additional item parameters can be added to the transaction. This item data is passed for all items placed in the shopping cart. The following parameters are required:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. item data</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SKU</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>category</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Category the item belongs to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>price</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Price per item</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>quantity</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of items bought</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To track a transaction and items associated with it, use the REST call <a href="/en/omni-channel/online-store/setting-up-clients/_cms-syntax/case-examples/item-statistics#checkout/orderconfirmationitemslist">/rest/checkout/orderconfirmationitemslist/</a> in the <strong>CMS » Web design » Order process » Order confirmation » Tracking</strong> menu. This call returns a list of the items ordered. The code example below illustrates how to retrieve a transaction’s item list using this REST call. Individual item data will be sent to Google Analytics at the same time.</p>
</div>
<div class="paragraph instruction">
<p>Inserting example code into the design:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the example code to adjust it to your requirements.</p>
</li>
<li>
<p>Go to <strong>CMS » Web design » Order process » Order confirmation</strong>.</p>
</li>
<li>
<p>Open the <strong>Tracking</strong> tab.</p>
</li>
<li>
<p>Insert the code example at an appropriate position of the template.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plenty" data-lang="plenty">{#
	Code example for registering individual items with Google Analytics.
#}
&lt;script type="text/javascript"&gt;
	$.ajax(
		{# REST call to retrieve a transaction's item list. #}
		"/rest/checkout/orderconfirmationitemslist/",
		{
			dataType: "json",
			type: "GET",
			success: function(response)
			{
				var articleList = response.data;
				for(var i = 0; i &lt; articleList.length; i++)
				{
					{# Adds an item to the transaction. #}
					ga('ecommerce:addItem',
					{
						'id': $OrderID,												{# associated transaction ID #}
						'name': articleList[i].OrderConfirmationItemShortName,		{# Item name #}
						'sku': articleList[i].OrderConfirmationItemItemID,			{# Optional: additional item data (e.g. item number) #}
						'price': articleList[i].OrderConfirmationItemPrice,			{# Optional: item price #}
						'quantity': articleList[i].OrderConfirmationItemQuantity,	{# Optional: number of items #}
						'currency': 'GBP'											{# Optional: currency #}
					});
					{# Sends the item data. #}
					ga('ecommerce:send');
				}
				{# Clears the shopping cart. #}
				ga('ecommerce:clear');
			}
		}
	);
&lt;/script&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</main>